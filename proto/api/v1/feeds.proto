syntax = "proto3";

package api.v1;

import "api/v1/page.proto";
import "api/v1/post.proto";
import "google/api/annotations.proto";
import "protoc-gen-openapiv2/options/annotations.proto";

option go_package = "social_network_system_design/api/v1;api";

service FeedsService {
  // pagination
  rpc Feeds(FeedsRequest) returns (FeedsResponse) {
    option (google.api.http) = {get: "/feeds"};
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {summary: "Лента, для получения новостей о популярных местах параметры не используются"};
  }
}

message FeedsRequest {
  Page page = 1;

  oneof feeds_type {
    PersonalFeeds user = 2;
    PlacesFeeds place = 3;
  }
}

message FeedsResponse {
  repeated Post posts = 1;
}

message PersonalFeeds {
  int64 user_id = 1 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {description: "User ID должен совпадать с тем, что в JWT"}];
}

message PlacesFeeds {}
